@model SampleMVCTest.Models.Item

@{
    ViewBag.Title = "Delete";
}

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="https://ajax.microsoft.com/ajax/jquery/jquery-1.10.2.js" type="text/javascript"></script>

<h2>Delete Item</h2>

<input type="hidden" id="itemId" value="@Model.Id" />
<form id="deleteItemForm">
    <div class="form-group">
        <label for="deleteItemId"  id="lblitemId">Item ID:</label>
        <input type="number" id="deleteItemId" class="form-control" required />
    </div>
    <button type="button" class="btn btn-danger" id="btnDelete" onclick="deleteItem()">Delete</button>
</form>

<div>
    @Html.ActionLink("Back to List", "Index")
</div>


<script>
    $(document).ready(function () {
        var itemId = $('#itemId').val();
        $('#deleteItemId').val(itemId);
        //loadItemForUpdate(itemId);
    });


    //function loadItemForUpdate(itemId) {
    //    debugger;
    //    $.ajax({
    //        url: '/api/ItemsApi/' + itemId,
    //        method: 'GET',
    //        success: function (data) {
    //            debugger;
    //            $('#itemId').val(data.Id);
    //            $('#updateName').val(data.Name);
    //            $('#updateDescription').val(data.Description);
    //        },
    //        error: function () {
    //            alert('Failed to load item.');
    //        }
    //    });
    //}

    function deleteItem() {
        var itemId = $('#deleteItemId').val();

        $.ajax({
            url: '/api/ItemsApi/' + itemId,
            method: 'DELETE',
            success: function () {
                alert('Item deleted successfully!');
                window.location.href = '/Items';
            },
            error: function () {
                alert('Failed to delete item.');
            }
        });
    }</script>
